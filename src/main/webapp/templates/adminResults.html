<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container-fluid">
            <a class="brand" href="#/admin/overview"><img alt="Steria" src="img/steria_logo2.png"> Quizzical</a>
            <p class="navbar-text pull-right">
                <button class="btn btn-link navbar-link" ng-click="logout()">Log out ({{user.username}})</button>
            </p>
            <ul class="nav">
                <li><a href="#/admin/overview">Overview</a></li>
                <li><a href="#/admin/addquiz">Add quiz</a></li>
                <li class="active"><a href="#/admin/results">Results</a></li>
				<li><a href="#/admin/changepw">Change password</a></li>
				<li><a href="#/admin/createUser">Create admin user</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="admin-quiz-box">
    <h2 class="quiz-box-heading">Results</h2>
	<div ng-repeat="quiz in quizzes | orderBy:'quizId'">
	    <hr>
	    <div class="row">
	        <div class="span3">
	            <h4 class="quiz-box-question">{{quiz.quizName}}</h4>

				<span ng-show="quiz.winner">
	            	<strong>Picked winner (randomly):</strong><br>
					Name: {{quiz.winner.name}}<br/>
					Email: {{quiz.winner.email}}<br/>
					Company: {{quiz.winner.company}}<br/>
					Phone number: {{quiz.winner.phoneNumber}}
					<br/>
				</span>
	        </div>
	        <div class="span4">
	            <p class="lead text-success">
	                {{quiz.responses}} respondents
					<br>
					<button type="button" class="btn" ng-click="drawRandomWinner(quiz.quizId)" ng-disabled="quiz.responses < 1">Pick a random winner</button>
					<button type="button" class="btn" ng-click="showRespondents(quiz.quizId)" ng-hide="showRespondentState['q' + quiz.quizId]" ng-disabled="quiz.responses < 1">Show respondents</button>
					<button type="button" class="btn" ng-click="hideRespondents(quiz.quizId)" ng-show="showRespondentState['q' + quiz.quizId]">Hide respondents</button>
	            </p>
	        </div>
	  	</div>
	    <div class="row" ng-show="showRespondentState['q' + quiz.quizId]">
	    	<table class="table">
	    		<tr>
	    			<th>#</th>
	    			<th>Name</th>
	    			<th>Email</th>
	    			<th>Company</th>
	    			<th>Phone number</th>
	    			<th>Score</th>
	    		</tr>
	    		<tr ng-repeat="respondent in quiz.respondentsList | orderBy:'-score'">
	    			<td>{{$index + 1}}</td>
	    			<td>{{respondent.name}}</td>
	    			<td>{{respondent.email}}</td>
	    			<td>{{respondent.company}}</td>
	    			<td>{{respondent.phoneNumber}}</td>
	    			<td>{{respondent.score}}</td>
	    		</tr>
	    	</table>
	    </div>
	</div>
</div>
